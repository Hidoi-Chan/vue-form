(function(e){function t(t){for(var i,n,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)n=l[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&p.push(o[n][0]),o[n]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,l=1;l<a.length;l++){var s=a[l];0!==o[s]&&(i=!1)}i&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},o={app:0},r=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0d4e":function(e,t,a){"use strict";a("87a6")},"251e":function(e,t,a){},2680:function(e,t,a){"use strict";a("ef92")},"377c":function(e,t,a){"use strict";a("c84d")},3787:function(e,t,a){"use strict";a("5766")},"56d1":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Form")],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"form"},[e._m(0),a("div",{staticClass:"form-body"},e._l(e.sections,(function(t,i){return a("Section",{key:i,attrs:{name:i,params:t},on:{"check-valid-section":e.checkValidSection,"go-to-prev-section":e.goToPrevSection}},[a("div",{staticClass:"grid",class:t.addClass&&[i]},e._l(e.formdata[i],(function(t,o){var r;return a("div",{key:o,class:(r={},r[o]=t.addClass,r.error=!t.value.trim()&&t.touched&&!!t.validation||t.error,r)},[a("Label",{attrs:{name:o,label:t.label,required:!!t.validation&&t.validation.required}}),"input"===t.type?a("Input",{attrs:{name:o,placeholder:t.placeholder,sectionKey:i,touched:t.touched},on:{input:e.changeInput,focus:e.focusInput,blur:e.blurInput},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"elem.value"}}):"select"===t.type?a("Select",{attrs:{name:o,sectionKey:i,multiple:t.multiple,value:t.value,open:t.isOpen,options:t.options,error:!t.value.trim()&&t.touched&&!!t.validation},on:{change:e.changeSelect,"toggle-select":e.toggleSelect,"close-select":e.closeSelect}}):e._e()],1)})),0)])})),1),a("div",{staticClass:"form-footer"},[e.isValid?a("div",{staticClass:"success"},[e._v("Новый клиент успешно создан")]):a("div",{staticClass:"notifications"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.notification.value,expression:"notification.value"}],attrs:{type:"checkbox",id:"notifications"},domProps:{checked:Array.isArray(e.notification.value)?e._i(e.notification.value,null)>-1:e.notification.value},on:{change:function(t){var a=e.notification.value,i=t.target,o=!!i.checked;if(Array.isArray(a)){var r=null,n=e._i(a,r);i.checked?n<0&&e.$set(e.notification,"value",a.concat([r])):n>-1&&e.$set(e.notification,"value",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.notification,"value",o)}}}),a("label",{staticClass:"notifications",attrs:{for:"notifications"}},[e._v(e._s(e.notification.label))])]),a("Button",{on:{click:e.sendForm}},[e._v("Зарегистрироваться")])],1)])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-header"},[a("h1",[e._v("Форма регистрации")])])}],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"accordion",class:e.params.isOpen&&"open"},[a("div",{staticClass:"accordion-title"},[a("h2",[e._v(e._s(e.params.title))]),a("div",{staticClass:"icon"})]),a("div",{staticClass:"accordion-body"},[e._t("default"),e.params.error.isError?a("div",{staticClass:"error"},["date"===e.params.error.typeOfError?a("p",[e._v("Введите корректную дату")]):"phone"===e.params.error.typeOfError?a("p",[e._v("Введите корректный номер телефона")]):a("p",[e._v("Заполнены не все обязательные поля секции")])]):e._e(),a("div",{staticClass:"accordion-buttons"},[e.params.buttons.prev?a("Button",{attrs:{left:!0},on:{click:function(t){return e.$emit("go-to-prev-section",e.name)}}},[e._v(" Назад ")]):e._e(),e.params.buttons.next?a("Button",{attrs:{right:!0},on:{click:function(t){return e.$emit("check-valid-section",e.name)}}},[e._v(" Далее ")]):e._e()],1)],2)])},c=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"button",class:{right:e.right,left:e.left},attrs:{disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.$emit("click")}}},[e._t("default")],2)},d=[],p={props:{right:Boolean,left:Boolean,disabled:Boolean}},f=p,v=(a("d2cb"),a("2877")),h=Object(v["a"])(f,u,d,!1,null,"3b3dea82",null),m=h.exports,b={components:{Button:m},props:{params:Object,name:String}},y=b,g=(a("c34b"),Object(v["a"])(y,s,c,!1,null,"0826c5d3",null)),_=g.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:e.name}},[e._v(" "+e._s(e.label)+" "),e.required?a("span",[e._v(" *")]):e._e()])},S=[],k={props:{name:String,label:String,required:Boolean}},x=k,$=(a("3787"),Object(v["a"])(x,O,S,!1,null,"69c9359c",null)),C=$.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("input",{class:{focus:e.open},attrs:{type:"text",id:e.name,readonly:e.readonly,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value,e.sectionKey,e.name)},focus:function(t){return e.$emit("focus",e.sectionKey,e.name)},blur:function(t){return e.$emit("blur",e.sectionKey,e.name,t.target)},click:function(t){return e.$emit("click",e.sectionKey,e.name)}}})},j=[],K={props:{name:String,readonly:Boolean,value:String,touched:Boolean,sectionKey:String,open:Boolean,placeholder:String}},V=K,q=(a("0d4e"),Object(v["a"])(V,E,j,!1,null,"a6493c44",null)),w=q.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-block",class:{multiple:e.multiple,error:e.error}},[a("Input",{attrs:{name:e.name,readonly:!0,sectionKey:e.sectionKey,value:e.value,open:e.open},on:{blur:e.closeSelect,click:e.toggleSelect}}),a("span"),a("div",{ref:"options",staticClass:"options-container",class:{open:e.open}},[a("ul",{staticClass:"options"},e._l(e.options,(function(t){return a("li",{key:t.value,staticClass:"option"},[a("input",{attrs:{type:e.multiple?"checkbox":"radio",name:"option.name",id:t.value},domProps:{value:t.label},on:{change:function(t){return e.$emit("change",e.sectionKey,e.name,t.target.value)}}}),a("label",{attrs:{for:t.value}},[e._v(" "+e._s(t.label)+" ")])])})),0)])],1)},P=[],I={props:{name:String,multiple:Boolean,options:Array,open:Boolean,sectionKey:String,value:String,error:Boolean},methods:{toggleSelect(e,t){this.$emit("toggle-select",e,t)},closeSelect(e,t,a){this.$emit("close-select",e,t,a)}},components:{Input:w}},T=I,A=(a("377c"),Object(v["a"])(T,B,P,!1,null,"318b9cb5",null)),D=A.exports,N={data:()=>({sections:{person:{title:"Персональные данные",isOpen:!0,isValid:!1,error:{isError:!1,typeOfError:""},buttons:{prev:!1,next:!0}},adress:{title:"Адресные данные",isOpen:!1,isValid:!1,error:{isError:!1,typeOfError:""},buttons:{prev:!0,next:!0}},document:{title:"Удостоверение личности",isOpen:!1,isValid:!1,error:{isError:!1,typeOfError:""},buttons:{prev:!0,next:!0}},client:{title:"Параметры клиента",isOpen:!1,isValid:!1,error:{isError:!1,typeOfError:""},buttons:{prev:!0,next:!1},addClass:!0}},formdata:{person:{lastname:{type:"input",label:"Фамилия",value:"",touched:!1,valid:!1,error:"",validation:{required:!0}},firstname:{type:"input",label:"Имя",value:"",touched:!1,valid:!1,error:"",validation:{required:!0}},patronymic:{type:"input",label:"Отчество",value:""},gender:{type:"select",multiple:!1,label:"Пол",isOpen:!1,options:[{name:"genderRadio",value:"male",label:"Мужчина"},{name:"genderRadio",value:"female",label:"Женщина"}],value:"",touched:!1,valid:!1,error:"",validation:{required:!0}},"date-of-birth":{type:"input",label:"Дата рождения",value:"",touched:!1,valid:!1,error:"",placeholder:"ДД.ММ.ГГГГ",validation:{required:!0,data:"date"}},phone:{type:"input",label:"Номер телефона",value:"",touched:!1,valid:!1,error:"",placeholder:"7 (999) 999-99-99",validation:{required:!0,data:"phone"}}},adress:{country:{type:"input",label:"Страна",value:""},region:{type:"input",label:"Область",value:""},city:{type:"input",label:"Город",value:"",touched:!1,valid:!1,error:"",validation:{required:!0}},index:{type:"input",label:"Индекс",value:""},street:{type:"input",label:"Улица",value:""},house:{type:"input",label:"Дом",value:""}},document:{"type-of-document":{type:"select",multiple:!1,label:"Тип документа",isOpen:!1,options:[{name:"document",value:"passport",label:"Паспорт"},{name:"document",value:"birth-certificate",label:"Свидетельтво о рождении"},{name:"document",value:"drivers-license",label:"Водительское удостоверение"}],addClass:!0,value:"",touched:!1,valid:!1,error:"",validation:{required:!0}},series:{type:"input",label:"Серия",value:""},number:{type:"input",label:"Номер",value:""},"date-of-issue":{type:"input",label:"Дата выдачи",value:"",touched:!1,valid:!1,error:"",placeholder:"ДД.ММ.ГГГГ",validation:{required:!0,data:"date"}},"issued-by":{type:"input",label:"Кем выдан",addClass:!0,value:""}},client:{doctor:{type:"select",multiple:!1,label:"Лечащий врач",isOpen:!1,options:[{name:"doctorName",value:"Ivanov",label:"Иванов"},{name:"doctorName",value:"Zaharov",label:"Захаров"},{name:"doctorName",value:"Chernisheva",label:"Чернышева"}],value:""},"type-of-client":{type:"select",multiple:!0,label:"Тип клиента",isOpen:!1,options:[{name:"type-of-client-checkbox",value:"vip",label:"VIP"},{name:"type-of-client-checkbox",value:"problematic",label:"Проблемные"},{name:"type-of-client-checkbox",value:"health-insurance",label:"ОМС"}],value:"",touched:!1,valid:!1,error:"",validation:{required:!0}}}},notification:{label:"Уведомлять по СМС",value:!0},isValid:!1}),methods:{focusInput(e,t){this.formdata[e][t].validation&&(this.formdata[e][t].touched=!1)},blurInput(e,t){this.formdata[e][t].validation&&(this.formdata[e][t].touched=!0,"phone"===this.formdata[e][t].validation.data&&this.renderPhoneNumber(e,t),"date"===this.formdata[e][t].validation.data&&this.renderDate(e,t))},renderPhoneNumber(e,t){const a=this.formdata[e][t].value,i=a.split("").filter(e=>/\d/.test(e));11!==i.length||"8"!==i[0]&&"7"!==i[0]?this.formdata[e][t].error||(this.formdata[e][t].error="phone"):(i[0]="7",i.splice(1,0," ("),i.splice(5,0,") "),i.splice(9,0,"-"),i.splice(12,0,"-"),this.formdata[e][t].value=i.join(""))},renderDate(e,t){let a=this.formdata[e][t].value;const i=a.split(/\W/).filter(e=>/\d/.test(e)).map(e=>+e),o=new Date,r=new Date(i[2],i[1]-1,i[0]);if(3===i.length&&i[0]<=31&&i[1]<=12&&(i[2]<=99||i[2]>1900)&&r.getTime()<=o.getTime()){const i=("0"+r.getDate()).slice(-2),o=("0"+(r.getMonth()+1)).slice(-2),n=r.getFullYear();a=`${i}.${o}.${n}`,this.formdata[e][t].value=a}else this.formdata[e][t].error||(this.formdata[e][t].error="date")},changeInput(e,t,a){this.formdata[t][a].validation&&(e.trim()?(this.formdata[t][a].valid=!0,this.formdata[t][a].error=""):(this.formdata[t][a].valid=!1,this.formdata[t][a].error="required"))},checkValidSection(e){let t=!0;this.sections[e].error.isError=!1,this.sections[e].error.typeOfError="",Object.keys(this.formdata[e]).map(a=>{!0===!!this.formdata[e][a].validation&&(!this.formdata[e][a].error&&this.formdata[e][a].valid||(this.sections[e].error.isError=!0,this.formdata[e][a].valid=!1,this.formdata[e][a].touched=!0,"required"!==this.sections[e].error.typeOfError&&(this.sections[e].error.typeOfError=this.formdata[e][a].error),t=!1))}),this.sections[e].isValid=t,this.sections[e].isValid&&(this.sections[e].error.isError=!1)},goToPrevSection(e){this.sectionsKeys.map((t,a)=>{t===e&&(this.sections[t].isOpen=!1,this.sections[this.sectionsKeys[a-1]].isValid=!1,this.sections[this.sectionsKeys[a-1]].isOpen=!0)})},toggleSelect(e,t){this.formdata[e][t].isOpen?this.formdata[e][t].isOpen=!1:this.formdata[e][t].isOpen=!0,this.formdata[e][t].touched=!1},closeSelect(e,t,a){this.formdata[e][t].validation&&(this.formdata[e][t].touched=!0,this.changeInput(this.formdata[e][t].value,e,t)),this.formdata[e][t].isOpen&&(this.formdata[e][t].touched=!1,a.focus())},changeSelect(e,t,a){if(this.formdata[e][t].multiple){let i=[];this.formdata[e][t].value&&(i=this.formdata[e][t].value.split(", "));const o=i.indexOf(a);-1===o?i.push(a):i.splice(o,1),this.formdata[e][t].value=i.join(", ")}else this.formdata[e][t].isOpen=!1,this.formdata[e][t].value=a},sendForm(){let e=!0;this.sectionsKeys.map((t,a)=>{a===this.sectionsKeys.length-1&&!0===e&&this.checkValidSection(t),this.sections[t].isValid||(e=!1)}),this.isValid=e}},watch:{sections:{handler(e){this.sectionsKeys.map((t,a)=>{e[t].isOpen&&e[t].isValid&&(e[t].isOpen=!1,a+1<this.sectionsKeys.length&&(e[this.sectionsKeys[a+1]].isOpen=!0))})},deep:!0}},computed:{sectionsKeys(){return Object.keys(this.sections)}},components:{Section:_,Label:C,Input:w,Select:D,Button:m}},F=N,M=(a("2680"),Object(v["a"])(F,n,l,!1,null,"4260680a",null)),J=M.exports,L={name:"App",components:{Form:J}},R=L,W=(a("abb8"),Object(v["a"])(R,o,r,!1,null,null,null)),Y=W.exports;i["a"].config.productionTip=!1,i["a"].config.devtools=!0,new i["a"]({render:function(e){return e(Y)}}).$mount("#app")},5766:function(e,t,a){},"87a6":function(e,t,a){},abb8:function(e,t,a){"use strict";a("56d1")},c34b:function(e,t,a){"use strict";a("251e")},c84d:function(e,t,a){},d2cb:function(e,t,a){"use strict";a("d69c")},d69c:function(e,t,a){},ef92:function(e,t,a){}});
//# sourceMappingURL=app.cf479f62.js.map